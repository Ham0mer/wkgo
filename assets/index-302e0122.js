import{d as e,o as t,c as a,a as n,_ as r,u as l,b as o,r as i,e as s,f as c,h as u,i as d,t as f,w as m,j as _,k as p,l as x,m as g,n as h,p as v,q as b,N as w,s as y,v as F,x as k}from"./index-a7be1de6.js";import{_ as $}from"./Tooltip-6d73131c.js";import{_ as j,a as S,b as D}from"./Image-9fbce8b9.js";import"./enUS-b09b7fb9.js";import"./index-92eb66c0.js";const q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},C=[n("rect",{x:"48",y:"96",width:"416",height:"320",rx:"40",ry:"40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M112 160l144 112l144-112"},null,-1)],A=e({name:"MailOutline",render:function(e,n){return t(),a("svg",q,C)}});function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e){if(!("string"==typeof e||e instanceof String)){var t=E(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var a in t)void 0===e[a]&&(e[a]=t[a]);return e}function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){var a,n;z(e),"object"===R(t)?(a=t.min||0,n=t.max):(a=arguments[1],n=arguments[2]);var r=encodeURI(e).split(/%..|./).length-1;return r>=a&&(void 0===n||r<=n)}var T={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};var U="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",W="(".concat(U,"[.]){3}").concat(U),L=new RegExp("^".concat(W,"$")),N="(?:[0-9a-fA-F]{1,4})",O=new RegExp("^("+"(?:".concat(N,":){7}(?:").concat(N,"|:)|")+"(?:".concat(N,":){6}(?:").concat(W,"|:").concat(N,"|:)|")+"(?:".concat(N,":){5}(?::").concat(W,"|(:").concat(N,"){1,2}|:)|")+"(?:".concat(N,":){4}(?:(:").concat(N,"){0,1}:").concat(W,"|(:").concat(N,"){1,3}|:)|")+"(?:".concat(N,":){3}(?:(:").concat(N,"){0,2}:").concat(W,"|(:").concat(N,"){1,4}|:)|")+"(?:".concat(N,":){2}(?:(:").concat(N,"){0,3}:").concat(W,"|(:").concat(N,"){1,5}|:)|")+"(?:".concat(N,":){1}(?:(:").concat(N,"){0,4}:").concat(W,"|(:").concat(N,"){1,6}|:)|")+"(?::((?::".concat(N,"){0,5}:").concat(W,"|(?::").concat(N,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return z(e),(t=String(t))?"4"===t?L.test(e):"6"===t&&O.test(e):B(e,4)||B(e,6)}var X={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},Z=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,G=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,H=/^[a-z\d]+$/,J=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,K=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,P=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;function Q(e,t){if(z(e),(t=I(t,X)).require_display_name||t.allow_display_name){var a=e.match(Z);if(a){var n=a[1];if(e=e.replace(n,"").replace(/(^<|>$)/g,""),n.endsWith(" ")&&(n=n.slice(0,-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(t.split('"').length!==t.split('\\"').length)return!1}return!0}(n))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var r=e.split("@"),l=r.pop(),o=l.toLowerCase();if(t.host_blacklist.includes(o))return!1;if(t.host_whitelist.length>0&&!t.host_whitelist.includes(o))return!1;var i=r.join("@");if(t.domain_specific_validation&&("gmail.com"===o||"googlemail.com"===o)){var s=(i=i.toLowerCase()).split("+")[0];if(!M(s.replace(/\./g,""),{min:6,max:30}))return!1;for(var c=s.split("."),u=0;u<c.length;u++)if(!H.test(c[u]))return!1}if(!(!1!==t.ignore_max_length||M(i,{max:64})&&M(l,{max:254})))return!1;if(!function(e,t){z(e),(t=I(t,T)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var a=e.split("."),n=a[a.length-1];if(t.require_tld){if(a.length<2)return!1;if(!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1;if(/\s/.test(n))return!1}return!(!t.allow_numeric_tld&&/^\d+$/.test(n))&&a.every((function(e){return!(e.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))}))}(l,{require_tld:t.require_tld,ignore_max_length:t.ignore_max_length})){if(!t.allow_ip_domain)return!1;if(!B(l)){if(!l.startsWith("[")||!l.endsWith("]"))return!1;var d=l.slice(1,-1);if(0===d.length||!B(d))return!1}}if('"'===i[0])return i=i.slice(1,i.length-1),t.allow_utf8_local_part?P.test(i):J.test(i);for(var f=t.allow_utf8_local_part?K:G,m=i.split("."),_=0;_<m.length;_++)if(!f.test(m[_]))return!1;return!t.blacklisted_chars||-1===i.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))}const V={class:"flex flex-col items-center w-screen h-screen pt-20"},Y={class:"absolute top-3 right-10 space-x-4"},ee={class:"flex flex-col items-center justify-center w-full p-10"},te={class:"inline-flex items-center"},ae={class:"text-3xl font-bold"},ne={class:"flex items-center justify-center"},re={class:"w-80 sm:w-96 border-amber-100"},le=r(e({__name:"index",setup(e){const{appName:r}=l(),{t:q}=g();o();const C=i(null),E=s(),z=h(),I=c({email:""}),R=i({disabled:!1}),M=i({data:{url:"",email:""}}),T={email:[{required:!0,message:"请输入邮箱",trigger:["input","blur"]},{validator:(e,t)=>Q(t??""),message:"请输入正确的邮箱",trigger:["blur"]}]},U=()=>{var e;R.value.disabled=!0,null==(e=C.value)||e.validate((async e=>{if(e)return void E.error(e[0][0].message);const{data:t}=await v(I);M.value.data=t;const a=setInterval((()=>{b(I).then((e=>{0===e.code&&(E.success("登录成功"),l().setMarkContent(I.email),clearInterval(a),setTimeout((()=>{z.push({name:"home_index"})}),2e3))}))}),5e3)})).catch((e=>{}))};return(e,l)=>{const o=w,i=$,s=j,c=S,g=y,h=D;return t(),a("div",V,[n("div",Y,[u(d(F)),u(d(k))]),n("div",ee,[n("div",te,[n("h1",ae,f(d(r)),1)]),n("p",null,f(d(q)("views.login.tips")),1)]),n("div",ne,[n("div",re,[u(h,{ref_key:"formRef",ref:C,rules:T,model:I,size:"large","show-label":!1},{default:m((()=>[u(s,{first:"",path:"email"},{default:m((()=>[u(i,{disabled:R.value.disabled,value:I.email,"onUpdate:value":l[0]||(l[0]=e=>I.email=e),placeholder:d(q)("views.login.email")},{prefix:m((()=>[u(o,{component:d(A)},null,8,["component"])])),_:1},8,["disabled","value","placeholder"])])),_:1}),M.value.data.url?(t(),_(c,{key:0,src:M.value.data.url,"preview-disabled":""},null,8,["src"])):p("",!0),u(s,null,{default:m((()=>[u(g,{block:!0,type:"primary","attr-type":"button",disabled:""!==M.value.data.url||!I.email,onClick:U},{default:m((()=>[x(f(M.value.data.url?"请扫码登录":d(q)("views.login.login")),1)])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"])])]),n("footer",null,"©️2022 "+f(d(r)),1)])}}}),[["__scopeId","data-v-60de7084"]]);export{le as default};
